<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>后台管理</title>
    <meta name="viewport" content="initial-scale=1, width=device-width, maximum-scale=1, user-scalable=no">
    <link type="text/css" rel="stylesheet" href="../resources/css/reset/reset.css">
    <link type="text/css" rel="stylesheet" href="../resources/css/manage-background/ps-index.css" >
    <link href="../resources/css/bootstrap.css" rel="stylesheet">
</head>

<body>
<div class="">
    #parse("lcjxjd_back/ps-index-header.html")

    <div class="row" id="content">
        <div class="col-md-1 main-side-nav">
             #parse("lcjxjd_back/ps-index-left.html")
        </div>


        <div class="col-md-11 right-content">
            <!--发布通知-->
            <div class="tab col-sm-12">
                <!--原有通知-->
                <!--<div class="part1 notice-child-part row none">-->
                    <!---->
                <!--</div>-->
                
                <!--发布通知-->
                <div class="part2 notice-child-part col-sm-12 row">

                    <table class="table table-hover table-bordered mt20">
					<form role="form"  class="col-sm-4" id="editForm" action="addMessage.htm" method="post" enctype="multipart/form-data">
                        
                        <div class="declare-kind">
		                    <label class="radio-inline">
		                      <input type="radio" name="type" id="inlineRadio1" value="0">发布通知
		                    </label>
		                    <label class="radio-inline">
		                      <input type="radio" name="type" id="inlineRadio2" value="1">发布动态
		                    </label>
		                    <label class="radio-inline">
		                      <input type="radio" name="type" id="inlineRadio3" value="2">发布政策
		                    </label>
		                    <label class="radio-inline">
		                      <input type="radio" name="type" id="inlineRadio4" value="3">发布理论
		                    </label>
		                    <label class="radio-inline">
		                      <input type="radio" name="type" id="inlineRadio5" value="4">发布课程
		                    </label>
		                    <label class="radio-inline">
		                      <input type="radio" name="type" id="inlineRadio6" value="5">发布评审
		                    </label>
		                    <label class="radio-inline">
		                      <input type="radio" name="type" id="inlineRadio7" value="6"> 发布结果
		                    </label>
                		</div>
                        
                        <input type="hidden" name="text" value="" id="text">
<!--                         <input type="hidden" name="type" value="$!type" id="message_type"> -->
                        <input type="hidden" name="id" value="$!message.id" id="message_id"/>
                        <tbody id="addNotice">

                        <tr class="">
                            <th>文章标题</th>
                            <td><input class="w600" type="text" value="$!message.title" name="title" /></td>
                        </tr>
                        <tr class="">
                            <th>作者</th>
                            <td><input class="w300" type="text" value="$!message.author" name="author" /></td>
                        </tr>
                        <tr class="">
                            <th>来源</th>
                            <td><input class="w300" type="text" value="$!message.source" name="source" /></td>
                        </tr>
                        <tr class="">
                            <th>文章内容</th>
                            <td class="row pb100">
                                <div class="col-sm-offset-1">
                                    <script id="editor" type="text/plain" class="col-sm-8"></script>
                                </div>
                            </td>
                        </tr>


                        <tr class="">
                            <th>上传附件</th>
                            <td class="row pb50">
                                <div class="col-sm-offset-1">   
                                        <div class="form-group">
                                            <label for="n-uploadFile">文件上传</label>
                                            <input type="file" id="n-uploadFile" name="myFile">
                                            <p class="help-block">文件大小不能超过20M</p>
                                        </div> 
                                </div>
                            </td>
                        </tr>

                        <tr class="mt200">
                            <th>&nbsp;</th>
                            <td><button id="notice-upload" type="button" class="btn btn-primary" onclick="submitEdit()">发布</button></td>
                        </tr>
                        </tbody>
                    </form>
                    </table>
                    
                    <input type="hidden" id="update_text" value='$!message.text'/>
                    
                    <!--<div class="btn-group  col-sm-12">-->
                        <!--<button id="upload" type="button" class="notice-child-child btn btn-default">上传附件</button>-->
                        <!--<button id="writting" type="button" class="notice-child-child btn btn-default">在线编辑</button>-->
                    <!--</div>-->

                    <!--<div class="child-content col-sm-12 row">-->
                        <!--<div class="part2-1 notice-child-child-part  none">-->
                            <!--<form role="form"  class="col-sm-4">-->
                                <!--<div class="form-group">-->
                                    <!--<label for="uploadFile">文件上传</label>-->
                                    <!--<input type="file" id="uploadFile">-->
                                    <!--<p class="help-block">Example block-level help text here.</p>-->
                                <!--</div>-->
                                <!--<button id="upload-submit" type="submit" class="btn btn-default">Submit</button>-->
                            <!--</form>-->
                        <!--</div>-->

                        <!--<div class="part2-2 notice-child-child-part none">-->
                            <!--<div class="btn-group col-sm-2">-->
                                <!--<button id="notice-save" type="button" class="btn btn-default">保存编辑</button>-->
                                <!--<button id="notice-upload" type="button" class="btn btn-default">上传编辑</button>-->
                            <!--</div>-->
                            <!--<script id="editor" type="text/plain" class=" col-sm-9 "></script>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                </div>
            </div>

            <!--发布工作动态-->

        </div>
    </div>
    <!--end <div class="row" id="content">-->
</div>


<script src="../resources/js/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../resources/js/bootstrap.min.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8" src="../resources/web_manage_back/ueditor1_4_3/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="../resources/web_manage_back/ueditor1_4_3/ueditor.all.min.js"> </script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="../resources/web_manage_back/ueditor1_4_3/lang/zh-cn/zh-cn.js"></script>

<script src="../resources/js/manege-back/ps-tab.js" type="text/javascript"></script>

<script type="text/javascript">

    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('editor',{
        toolbars: [
            [
                'undo', //撤销
                'redo', //重做
                'bold', //加粗
                'italic', //斜体
                'underline', //下划线
                'strikethrough', //删除线
                'subscript', //下标
                'fontborder', //字符边框
                'superscript', //上标
                'formatmatch', //格式刷
                'source', //源代码
                'horizontal', //分隔线
                'unlink', //取消链接
                'fontfamily', //字体
                'fontsize', //字号
                'paragraph', //段落格式
                'simpleupload', //单图上传
                'link', //超链接
                'justifyleft', //居左对齐
                'justifyright', //居右对齐
                'justifycenter', //居中对齐
                'justifyjustify', //两端对齐
                'forecolor', //字体颜色
                'fullscreen', //全屏
                'attachment', //附件
                'imagecenter', //居中
                'lineheight' ,//行间距
                'preview'//预览
            ]
        ],
        autoHeightEnabled: false,
        autoFloatEnabled: true,
        elementPathEnabled:false
    });

    function submitEdit(){
    	var text = document.getElementById("text");
    	var file = document.getElementById("n-uploadFile");
    	var id = document.getElementById("message_id");
    	var type = document.getElementById("message_type");
    	text.value = UE.getEditor("editor").getContent();
    	document.getElementById("editForm").submit();
    }
    
    var text = document.getElementById("update_text").value;  
    UE.getEditor('editor').ready(function(){ 
        ue.setContent(text,false);//这里给编辑器添加内容 
    });

</script>

</body>
</html>